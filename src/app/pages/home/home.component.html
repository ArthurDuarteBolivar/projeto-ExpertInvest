
<main id="main" *ngIf="isLoaded">
    <section class="banner-section">
        <div class="container">
            <div class="container-info">
                <h1>
                    <b>GERENCIE TODOS SEUS INVESTIMENTOS EM UM LUGAR SÓ!</b>
                    <span class="d-block mt-3">Uma plataforma completa para você acompanhar os seus investimentos com
                        segurança.</span>
                </h1>
            </div>
            <div class="container-price">
                <a [routerLink]="['/indices/ibov']" *ngFor="let b3 of b3$ | async">
                    <div class="main-info">
                        <h1>{{b3.scty.symb}}</h1>
                        <strong>{{b3.scty.SctyQtn.curPrc | customNumberFormat}}<span>pts</span></strong>
                    </div>
                    <span> <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn > 0">trending_up</mat-icon>
                        <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn == 0">trending_flat</mat-icon>
                        <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn < 0">trending_down</mat-icon>{{b3.scty.SctyQtn.prcFlcn
                        |
                        customNumber}}%</span>
                </a>
                <a [routerLink]="['/indices/ibov']">
                    <div class="main-info">
                        <h1>Volume negociado</h1>
                        <strong *ngIf="(b3TradingFloor$ | async)?.TradgFlr">
                            {{ (b3TradingFloor$ | async)!.TradgFlr!.grssAmt | customNumberFormat }}
                        </strong>

                    </div>
                    <!-- <mat-icon>arrow_forward</mat-icon> -->
                </a>
                <a [routerLink]="['/indices/ibov']">
                    <div class="main-info">
                        <h1>Quantidade de negócios</h1>
                        <strong *ngIf="(b3TradingFloor$ | async)?.TradgFlr">
                            {{ (b3TradingFloor$ | async)!.TradgFlr!.qty | customNumberFormat }}
                        </strong>

                    </div>
                    <!-- <mat-icon>arrow_forward</mat-icon> -->
                </a>
            </div>
        </div>
    </section>
</main>
<section class="container_info" *ngIf="isLoaded">
    <div class="chart_container">
        <script type="text/javascript" src="https://s3.amazonaws.com/tradingview/tv.js"></script>
        <script type="text/javascript">
            new TradingView.widget({
                "container_id": "tv-adv-widget-home",
                "width": "100%",
                "height": "450px",
                "symbol": get_param("symbol", get_param("tvwidgetsymbol", "IBOV")),
                "interval": "1",
                "timezone": "exchange",
                "theme": "White",
                "style": "3",
                "toolbar_bg": "#f1f3f6",
                "withdateranges": true,
                "hide_side_toolbar": false,
                "details": false,
                "allow_symbol_change": true,
                "hideideas": true,
                "widgetbar_width": 300,
                "show_popup_button": false,
                "popup_width": "100%",
                "popup_height": "450px",
                "editablewatchlist": true,
                "customer": "bovespa",
                "locale": get_lang() == 'pt' ? 'br' : get_lang()
            });
        </script>
        <div id="tradingview_6aedb-wrapper"
            style="position: relative; box-sizing: content-box; font-family: -apple-system, BlinkMacSystemFont, &quot;Trebuchet MS&quot;, Roboto, Ubuntu, sans-serif; margin: 0px auto !important; padding: 0px !important; width: 100%; height: 450px;">
            <iframe title="advanced chart TradingView widget" lang="en" id="tradingview_6aedb" frameborder="0"
                allowtransparency="true" scrolling="no" allowfullscreen="true"
                src="https://s.tradingview.com/bovespa/widgetembed/?hideideas=1&amp;overrides=%7B%7D&amp;enabled_features=%5B%5D&amp;disabled_features=%5B%5D&amp;locale=br#%7B%22symbol%22%3A%22IBOV%22%2C%22frameElementId%22%3A%22tradingview_6aedb%22%2C%22interval%22%3A%221%22%2C%22hide_side_toolbar%22%3A%220%22%2C%22allow_symbol_change%22%3A%221%22%2C%22save_image%22%3A%221%22%2C%22editablewatchlist%22%3A%221%22%2C%22studies%22%3A%22%5B%5D%22%2C%22widgetbar_width%22%3A300%2C%22theme%22%3A%22White%22%2C%22style%22%3A%223%22%2C%22timezone%22%3A%22exchange%22%2C%22withdateranges%22%3A%221%22%2C%22studies_overrides%22%3A%22%7B%7D%22%2C%22utm_source%22%3A%22www.b3.com.br%22%2C%22utm_medium%22%3A%22widget%22%2C%22utm_campaign%22%3A%22chart%22%2C%22utm_term%22%3A%22IBOV%22%2C%22page-uri%22%3A%22www.b3.com.br%2Fpt_br%2Fmarket-data-e-indices%2Fservicos-de-dados%2Fmarket-data%2Fcotacoes%2Fderivativos.htm%22%7D"
                style="width: 100%; height: 100%; margin: 0px !important; padding: 0px !important;"></iframe>
        </div>
    </div>
    <p class="small" style="padding-top:10px"><a aria-label="Página Externa - IBOV" target="_blank"
            href="https://br.tradingview.com/symbols/BMFBOVESPA-IBOV/">IBOV</a> chart by TradingView </p>
    <div class="title_container">
        <h1>Ações</h1>
        <span>BOVESPA e BM&F</span>
        <div class="price_container">
            <div class="price_container_item" *ngFor="let b3 of b3$ | async" [routerLink]="['/indices/ibov']">
                <span class="uppercase">ibovespa</span>
                <h3> <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn > 0">trending_up</mat-icon>
                    <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn == 0">trending_flat</mat-icon>
                    <mat-icon *ngIf="b3.scty.SctyQtn.prcFlcn < 0">trending_down</mat-icon> {{b3.scty.SctyQtn.prcFlcn |
                    customNumberFormat}}%
                </h3>
            </div>
            <div class="price_container_item" *ngFor="let b3 of b3$ | async" [routerLink]="['/indices/ibov']">
                <span class="uppercase">máx</span>
                <h3>{{b3.scty.SctyQtn.maxPric | customNumberFormat}}</h3>
            </div>
            <div class="price_container_item" *ngFor="let b3 of b3$ | async" [routerLink]="['/indices/ibov']">
                <span class="uppercase">min</span>
                <h3>{{b3.scty.SctyQtn.minPric | customNumberFormat}}</h3>
            </div>
        </div>
    </div>
    <main class="container_change">
        <div class="info__container" *ngIf="isOpen">
            <h3>Altas</h3>
            <div class="info__container_list">
                <div *ngFor="let item of (b3PriceFlutuationIbov$ | async)?.SctyHghstIncrLst" class="list_item"
                    [routerLink]="['/acoes', item.symb]">
                    <div class="list_item_title">
                        <h4>{{item.symb}} <span>{{item.desc}}</span></h4>
                        <div class="list_item_number">
                            <span><mat-icon class="green">trending_up</mat-icon>{{item.SctyQtn.prcFlcn |
                                customNumber}}%</span>
                            <span>R${{item.SctyQtn.curPrc| customNumberFormat}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="info__container" *ngIf="isOpen">
            <h3>Baixas</h3>
            <div class="info__container_list">
                <div *ngFor="let item of (b3PriceFlutuationIbov$ | async)?.SctyHghstDrpLst" class="list_item"
                    [routerLink]="['/acoes', item.symb]">
                    <div class="list_item_title">
                        <h4>{{item.symb}} <span>{{item.desc}}</span></h4>
                        <div class="list_item_number">
                            <span><mat-icon class="red">trending_down</mat-icon>{{item.SctyQtn.prcFlcn |
                                customNumber}}%</span>
                            <span>R${{item.SctyQtn.curPrc | customNumberFormat}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="info__container" *ngIf="isOpen">
            <h3>Maior Volume</h3>
            <div class="info__container_list">
                <div *ngFor="let item of (b3TradeVoluem$ | async)?.Volume" class="list_item"
                    [routerLink]="['/acoes', item.scty.symb]">
                    <div class="list_item_title">
                        <h4>{{item.scty.symb}} <span>{{item.scty.desc}}</span></h4>
                        <div class="list_item_number">
                            <span>R${{item.pricVal | customNumber}}</span>
                            <span>{{item.grossAmt | customNumberFormat}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="!isOpen" class="warning">
            <mat-icon>warning</mat-icon>
            <h1>As cotações serão exibidas 15 minutos após a abertura do pregão.</h1>
        </div>
        <!-- <div class="info__container">
            <h3>Dividendos</h3>
            <div *ngFor="let item of dividendosFii" class="info__container_list">
                <div class="list_item" [routerLink]="['/acoes', item.name]">
                    <div class="list_item_title">
                        <h4>{{item.name}} <span>{{item.nomeCompleto}}</span></h4>
                        <div class="list_item_number">
                            <span>R${{item.dividendValor}}</span>
                            <span>{{item.dataPagamentoNext | date: "d/M/YYY"}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </main>
</section>

<section class="container_info" *ngIf="isLoaded">
    <div class="title_container">
        <h1>Fii</h1>
        <span>Fundos de investimento imobiliário</span>
        <div class="price_container">
            <div class="price_container_item" *ngFor="let ifix of (ifix$ | async)" [routerLink]="['/indices/ifix']">
                <span class="uppercase">ifix</span>
                <h3> <mat-icon *ngIf="ifix.scty.SctyQtn.prcFlcn > 0">trending_up</mat-icon>
                    <mat-icon *ngIf="ifix.scty.SctyQtn.prcFlcn == 0">trending_flat</mat-icon>
                    <mat-icon *ngIf="ifix.scty.SctyQtn.prcFlcn < 0">trending_down</mat-icon> {{ifix.scty.SctyQtn.prcFlcn
                    | customNumberFormat}}%
                </h3>
            </div>
            <div class="price_container_item" *ngFor="let ifix of ifix$ | async" [routerLink]="['/indices/ifix']">
                <span class="uppercase">máx</span>
                <h3>{{ifix.scty.SctyQtn.maxPric | customNumberFormat}}</h3>
            </div>
            <div class="price_container_item" *ngFor="let ifix of (ifix$ | async)" [routerLink]="['/indices/ifix']">
                <span class="uppercase">min</span>
                <h3>{{ifix.scty.SctyQtn.minPric | customNumberFormat}}</h3>
            </div>
        </div>
    </div>
    <main class="container_change">
        <div class="info__container" *ngIf="isOpen">
            <h3>Altas</h3>
            <div class="info__container_list">
                <div *ngFor="let item of (b3PriceFlutuation$ | async)?.SctyHghstIncrLst" class="list_item"
                    [routerLink]="['/fii', item.symb]">
                    <div class="list_item_title">
                        <h4>{{item.symb}} <span>{{item.desc}}</span></h4>
                        <div class="list_item_number">
                            <span><mat-icon class="green">trending_up</mat-icon>{{item.SctyQtn.prcFlcn |
                                customNumber}}%</span>
                            <span>R${{item.SctyQtn.curPrc| customNumberFormat}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="info__container" *ngIf="isOpen">
            <h3>Baixas</h3>
            <div class="info__container_list">
                <div *ngFor="let item of(b3PriceFlutuation$ | async)?.SctyHghstDrpLst" class="list_item"
                    [routerLink]="['/fii', item.symb]">
                    <div *ngIf="!(b3PriceFlutuation$ | async)?.SctyHghstDrpLst">
                        <mat-icon>warning</mat-icon>
                        <span>As cotações serão exibidas 15 minutos após a abertura do pregão.</span>
                    </div>
                    <div class="list_item_title">
                        <h4>{{item.symb}} <span>{{item.desc}}</span></h4>
                        <div class="list_item_number">
                            <span><mat-icon class="red">trending_down</mat-icon>{{item.SctyQtn.prcFlcn |
                                customNumber}}%</span>
                            <span>R${{item.SctyQtn.curPrc| customNumberFormat}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="info__container" *ngIf="isOpen">
            <h3>Dividendos</h3>
            <div *ngFor="let item of dividendosFii$ | async" class="info__container_list">
                <div class="list_item" [routerLink]="['/fii', item.name]">
                    <div class="list_item_title">
                        <h4>{{item.name}} <span>{{item.nomeCompleto}}</span></h4>
                        <div class="list_item_number">
                            <span *ngIf="item.dividendValor != 0.0">R${{item.dividendNext | customNumber}}</span>
                            <span *ngIf="item.dividendValor == 0.0">R${{item.dividendLast | customNumber}}</span>
                            <span *ngIf="item.dataPagamentoNext != 1672542000000">{{item.dataPagamentoNext | date: "dd/MM/YYY"}}</span>
                            <span *ngIf="item.dataPagamentoNext == 1672542000000">{{item.dataPagamentoLast | date: "dd/MM/YYY"}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="!isOpen" class="warning">
            <mat-icon>warning</mat-icon>
            <h1>As cotações serão exibidas 15 minutos após a abertura do pregão.</h1>
        </div>
    </main>
</section>
<section class="news" *ngIf="isLoaded">
    <h1>Notícias</h1>
    <div>
        <ng-container *ngFor="let item of news">
            <a [href]="item.url"  target="_blank">
              <span>{{item.time | date: "dd/MM/yy, H:mm"}}</span>
              <img [src]="item.image_src" alt="imagem">
              <span>{{item.title}}</span>
            </a>
          </ng-container>
          
    </div>
</section>


<div class="loadingspinner" *ngIf="!isLoaded">
    <div id="square1"></div>
    <div id="square2"></div>
    <div id="square3"></div>
    <div id="square4"></div>
    <div id="square5"></div>
  </div>